(window.serpWebpackJsonp=window.serpWebpackJsonp||[]).push([["795fc9"],{"/HPy":function(e,t,a){"use strict";var n=a("ApmG"),o=a("vVAK"),r={};e.exports=function(e){return e&&o?(r[e]||(r[e]=e.substring(0,2)+n(e+r._version).toString(16)),r[e]||e):e}},"8UdI":function(e,t,a){"use strict";a.r(t),a.d(t,"OrganicExtralinksPopup",(function(){return R}));var n=a("35VS"),o=a("nAbZ"),r=a("cDcd"),i=a.n(r),c=a("ENTq"),s=a("8MOd"),u=a("0I89"),p=a("S42C"),d=a("lHJf"),l=a("WAka"),v=a("ebGA"),b=a("Bdxb");function f(e){var t=[],a=e.ecomRates,n=e.host,o=e.reviews,r=e.siteMore,i=void 0===r||r,c=e.connect,s=e.reportFeedback,u=n&&-1!==n.indexOf("video.yandex"),p=window.BEM.blocks.uri.parse(window.location.href),d=(p.getParam("text")||[])[0];if(a)t.push({variant:"reviewsDetails",ecomRates:a}),t.push({variant:"reviewsButton",text:a.reviewCountText,ecomRates:a});else if(o){var l=o.reviewsLink,v=!l;t.push({variant:"reviews",text:o.text,url:l,noReviews:v})}return n&&d&&i&&0!==d.indexOf("site:")&&!u&&(p.replaceParam("text","site:".concat(n," ").concat(d)),p.addParam("noreask","1"),t.push({variant:"sitemore",url:p.build()})),n&&!u&&t.push({variant:"info",host:n,tld:window.Ya.SerpContext.tld}),s&&0!==Object.keys(s).length&&t.push({variant:"reportFeedback",reportFeedback:s}),c&&t.push({variant:"connect",url:c.url}),t}function m(e){var t;(e.host||e.reviews)&&(e.items=null===(t=e.items)||void 0===t?void 0:t.reduce((function(t,a){var n;return"reviews"===a.variant&&(a.text||(null===(n=e.reviews)||void 0===n?void 0:n.text)||e.ecomRates)?t=t.concat(function(e,t){var a;if(t.ecomRates)return[Object(o.a)(Object(o.a)({},e),{variant:"reviewsDetails",url:void 0,text:t.ecomRates.reviewCountText,ecomRates:t.ecomRates}),Object(o.a)(Object(o.a)({},e),{variant:"reviewsButton",url:void 0,text:t.ecomRates.reviewCountText,ecomRates:t.ecomRates})];var n=null===(a=t.reviews)||void 0===a?void 0:a.reviewsLink,r=!n;return[Object(o.a)(Object(o.a)(Object(o.a)({},e),t.reviews),{url:n,noReviews:r})]}(a,e)):"info"===a.variant?t.push(Object(o.a)({host:a.host||e.host,tld:a.tld||window.Ya.SerpContext.tld},a)):t.push(a),t}),[]))}function w(e){var t;null===(t=e.items)||void 0===t||t.forEach((function(e){"reportFeedback"!==e.variant?v.a.has(e.variant)&&(e.onClick=function(){window.Ya.reactBus.emit("direct-abuse-modal:send",e.feedback)}):e.reportFeedback&&(e.onClick=function(){window.Ya.reactBus.emit(l.b,e.reportFeedback)})}))}function O(e){var t,a=null===(t=e.items)||void 0===t?void 0:t.find((function(e){return"reviewsButton"===e.variant}));if(null==a?void 0:a.ecomRates){var n={ecomRates:a.ecomRates,baobabParent:e.baobabParent};a.onClick=function(){window.Ya.reactBus.emit(b.b,n)}}}var x,h=Object(n.f)({desktop:function(){return{createItems:f,extendReviewsAndHostItems:m,updateReportFeedbackItem:w,updateEcomRates:O}}});!function(e){e[e.Open=0]="Open",e[e.Close=1]="Close",e[e.Toggle=2]="Toggle"}(x||(x={}));var j=function(e,t){var a;switch(t.type){case x.Toggle:return(a=t.props||e)?Object(o.a)(Object(o.a)({},a),{popup:Object(o.a)(Object(o.a)({},a.popup),{visible:!(e&&e.popup&&e.popup.visible)})}):null;case x.Open:return a=t.props,Object(o.a)(Object(o.a)({},a),{popup:Object(o.a)(Object(o.a)({},a.popup),{visible:!0})});case x.Close:return e?Object(o.a)(Object(o.a)({},e),{popup:Object(o.a)(Object(o.a)({},e.popup),{visible:!1})}):null}},k=Object(c.withBaobab)({name:"extralinks-popup"},p.a),R=Object(n.d)({desktop:function(){var e=Object(o.g)(i.a.useReducer(j,null),2),t=e[0],a=e[1],n=i.a.useRef(null),r=h(),p=r.createItems,l=r.extendReviewsAndHostItems,v=r.updateReportFeedbackItem,b=r.updateEcomRates;return i.a.useEffect((function(){var e=function(e){if(e.uniqId){var t=document.getElementById(e.uniqId);t&&t.setAttribute("aria-expanded","true")}e.popup&&(e.popup.direction=e.popup.direction||["bottom","top"],e.popup.innerRef=n,e.popup.className=e.popup.className?"".concat(e.popup.className," extralinks-popup"):"extralinks-popup",e.popup.onClose=function(t){var n;if("touch-phone"!==e.templatePlatform||"scroll"!==(null==t?void 0:t.type)||e.isHermione){var o=null==t?void 0:t.key;(null===(n=e.popup)||void 0===n?void 0:n.anchor)&&(null==t?void 0:t.target)===e.popup.anchor.current&&"Esc"!==o&&"Escape"!==o&&"Tab"!==o||(a({type:x.Close}),window.Ya.reactBus.emit(d.c,e.uniqId))}}),e.items?l(e):e.items=p(e),v(e),b(e),a({type:x.Toggle,props:e})};return Object(u.a)().on(d.d,e),function(){Object(u.a)().off(d.d,e)}}),[p,l,b,v]),t?i.a.createElement(c.BaobabAppendTo,{parentNode:t.baobabParent,logger:s.a},i.a.createElement(k,Object(o.a)({},t))):null}},{file:"web4/src/features/Organic/Organic.features/OrganicExtralinksPopup/index.ts"})},ApmG:function(e,t,a){"use strict";e.exports=function(e){var t,a=2166136261;for(t=0;t<e.length;++t)a^=e.charCodeAt(t),a+=(a<<1)+(a<<4)+(a<<7)+(a<<8)+(a<<24);return a>>>0}},vVAK:function(e,t,a){"use strict";e.exports="releases/frontend/web4/v1.2554.0-1ea74ee4b03a14d920084e6e2b6ea83208b27a13"}}]);